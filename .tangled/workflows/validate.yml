when:
  - event: ["push", "pull_request"]
    branch: main

# this is nix and very nice
engine: nixery

dependencies:
  nixpkgs:
    - go

steps:
  - name: format
    command: |
      nix fmt -- --fail-on-change
  - name: validate
    command: |
      nix run nixpkgs#deadnix -- --fail .
